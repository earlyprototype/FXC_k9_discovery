<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discovery Questionnaire | K9 Connectables</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600&family=Fraunces:wght@600;700&display=swap" rel="stylesheet">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script type="text/javascript">
        (function() {
            emailjs.init("T76uridl8AkTp3VwB");
        })();
    </script>
    <style>
        :root {
            --color-bg: #faf9f7;
            --color-surface: #ffffff;
            --color-text: #1a1a1a;
            --color-text-muted: #6b6b6b;
            --color-accent: #2d5a4a;
            --color-accent-light: #e8f0ed;
            --color-border: #e5e3df;
            --color-progress-bg: #e5e3df;
            --font-body: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-heading: 'Fraunces', Georgia, serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-body);
            background: var(--color-bg);
            color: var(--color-text);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 720px;
            margin: 0 auto;
            padding: 2rem 1.5rem 4rem;
        }

        header {
            text-align: center;
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--color-border);
        }

        .logo {
            font-family: var(--font-heading);
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--color-accent);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1.5rem;
        }

        h1 {
            font-family: var(--font-heading);
            font-size: 2.25rem;
            font-weight: 700;
            color: var(--color-text);
            margin-bottom: 0.75rem;
        }

        .subtitle {
            color: var(--color-text-muted);
            font-size: 1.0625rem;
        }

        .progress-container {
            position: sticky;
            top: 0;
            background: var(--color-bg);
            padding: 1rem 0;
            z-index: 100;
            margin-bottom: 2rem;
        }

        .progress-bar {
            height: 4px;
            background: var(--color-progress-bg);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--color-accent);
            border-radius: 2px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            font-size: 0.8125rem;
            color: var(--color-text-muted);
        }

        .section {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 1.5rem;
        }

        .section-header {
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--color-border);
        }

        .section-number {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--color-accent);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }

        .section-title {
            font-family: var(--font-heading);
            font-size: 1.375rem;
            font-weight: 600;
            color: var(--color-text);
        }

        .subsection {
            margin-bottom: 2rem;
        }

        .subsection:last-child {
            margin-bottom: 0;
        }

        .subsection-title {
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--color-text);
            margin-bottom: 1rem;
        }

        .question {
            margin-bottom: 1.25rem;
        }

        .question:last-child {
            margin-bottom: 0;
        }

        label {
            display: block;
            font-size: 0.9375rem;
            color: var(--color-text);
            margin-bottom: 0.5rem;
            line-height: 1.5;
        }

        input[type="text"],
        textarea {
            width: 100%;
            padding: 0.875rem 1rem;
            font-family: var(--font-body);
            font-size: 0.9375rem;
            color: var(--color-text);
            background: var(--color-bg);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        input[type="text"]:focus,
        textarea:focus {
            outline: none;
            border-color: var(--color-accent);
            box-shadow: 0 0 0 3px var(--color-accent-light);
        }

        input[type="text"]::placeholder,
        textarea::placeholder {
            color: #a0a0a0;
        }

        .submit-section {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
        }

        .submit-section p {
            color: var(--color-text-muted);
            margin-bottom: 1.5rem;
        }

        .btn {
            display: inline-block;
            padding: 1rem 2.5rem;
            font-family: var(--font-body);
            font-size: 1rem;
            font-weight: 600;
            color: #fff;
            background: var(--color-accent);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(45, 90, 74, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .contact {
            text-align: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--color-border);
            color: var(--color-text-muted);
            font-size: 0.875rem;
        }

        .contact a {
            color: var(--color-accent);
            text-decoration: none;
        }

        .contact a:hover {
            text-decoration: underline;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .status-message {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            font-size: 0.9375rem;
        }

        .status-success {
            background: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #a5d6a7;
        }

        .status-error {
            background: #ffebee;
            color: #c62828;
            border: 1px solid #ef9a9a;
        }

        .info-note {
            background: var(--color-accent-light);
            border: 1px solid var(--color-accent);
            border-radius: 8px;
            padding: 1rem;
            font-size: 0.875rem;
            color: var(--color-accent);
            margin-top: 1rem;
        }

        .info-note a {
            color: var(--color-accent);
            font-weight: 600;
        }

        @media (max-width: 600px) {
            .container {
                padding: 1.5rem 1rem 3rem;
            }

            h1 {
                font-size: 1.75rem;
            }

            .section {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">Creative Spark</div>
            <h1>Discovery Questionnaire</h1>
            <p class="subtitle">K9 Connectables</p>
        </header>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text">
                <span id="progressSection">Section 1 of 5</span>
                <span id="progressPercent">0% complete</span>
            </div>
        </div>

        <form id="discoveryForm">
            <!-- Section 0: About You -->
            <div class="section" data-section="1">
                <div class="section-header">
                    <div class="section-number">About You</div>
                    <h2 class="section-title">Your Details</h2>
                </div>

                <div class="question">
                    <label for="q0_1">Your name</label>
                    <input type="text" id="q0_1" name="q0_1" placeholder="Full name">
                </div>
                <div class="question">
                    <label for="q0_2">Your role in the organisation</label>
                    <input type="text" id="q0_2" name="q0_2" placeholder="e.g., Founder, Head of Product, etc.">
                </div>
            </div>

            <!-- Section 1: Business Context -->
            <div class="section" data-section="2">
                <div class="section-header">
                    <div class="section-number">Section 1</div>
                    <h2 class="section-title">Business Context</h2>
                </div>

                <div class="question">
                    <label for="q1_1">How would you describe K9 Connectables' current business trajectory?</label>
                    <textarea id="q1_1" name="q1_1" placeholder="Your response..."></textarea>
                </div>
                <div class="question">
                    <label for="q1_2">What is working well that you want to protect or build upon?</label>
                    <textarea id="q1_2" name="q1_2" placeholder="Your response..."></textarea>
                </div>
                <div class="question">
                    <label for="q1_3">Who are the core team members and what are their primary responsibilities?</label>
                    <textarea id="q1_3" name="q1_3" placeholder="Your response..."></textarea>
                </div>
                <div class="question">
                    <label for="q1_4">Are there resource constraints (time, budget, skills) we should be aware of?</label>
                    <textarea id="q1_4" name="q1_4" placeholder="Your response..."></textarea>
                </div>
                <div class="question">
                    <label for="q1_5">Where do you see K9 Connectables in 2-3 years?</label>
                    <textarea id="q1_5" name="q1_5" placeholder="Your response..."></textarea>
                </div>
            </div>

            <!-- Section 2: Market & Customer Understanding -->
            <div class="section" data-section="3">
                <div class="section-header">
                    <div class="section-number">Section 2</div>
                    <h2 class="section-title">Market & Customers</h2>
                </div>

                <div class="question">
                    <label for="q2_1">Who is your primary customer and what problem are they trying to solve?</label>
                    <textarea id="q2_1" name="q2_1" placeholder="Your response..."></textarea>
                </div>
                <div class="question">
                    <label for="q2_2">What feedback do you consistently hear from customers?</label>
                    <textarea id="q2_2" name="q2_2" placeholder="Your response..."></textarea>
                </div>
                <div class="question">
                    <label for="q2_3">Who are your main competitors and what differentiates you from them?</label>
                    <textarea id="q2_3" name="q2_3" placeholder="Your response..."></textarea>
                </div>
                <div class="question">
                    <label for="q2_4">How would you describe your current market position? (Premium, value, niche, etc.)</label>
                    <textarea id="q2_4" name="q2_4" placeholder="Your response..."></textarea>
                </div>
                <div class="question">
                    <label for="q2_5">What channels do you use to sell, and which perform best?</label>
                    <textarea id="q2_5" name="q2_5" placeholder="Your response..."></textarea>
                </div>
                <div class="question">
                    <label for="q2_6">What barriers exist to reaching new customers?</label>
                    <textarea id="q2_6" name="q2_6" placeholder="Your response..."></textarea>
                </div>
            </div>

            <!-- Section 3: Product Portfolio -->
            <div class="section" data-section="4">
                <div class="section-header">
                    <div class="section-number">Section 3</div>
                    <h2 class="section-title">Product Portfolio</h2>
                </div>

                <div class="question">
                    <label for="q3_1">Which products are performing well and why?</label>
                    <textarea id="q3_1" name="q3_1" placeholder="Your response..."></textarea>
                </div>
                <div class="question">
                    <label for="q3_2">Which products are underperforming or being phased out, and what have you learned?</label>
                    <textarea id="q3_2" name="q3_2" placeholder="Your response..."></textarea>
                </div>
                <div class="question">
                    <label for="q3_3">What unmet customer needs do you observe that your products don't address?</label>
                    <textarea id="q3_3" name="q3_3" placeholder="Your response..."></textarea>
                </div>
                <div class="question">
                    <label for="q3_4">What manufacturing processes do you use, and what are the constraints?</label>
                    <textarea id="q3_4" name="q3_4" placeholder="Your response..."></textarea>
                </div>
                <div class="question">
                    <label for="q3_5">What new capabilities would open up new possibilities?</label>
                    <textarea id="q3_5" name="q3_5" placeholder="Your response..."></textarea>
                </div>
            </div>

            <!-- Section 4: Challenges & Priorities -->
            <div class="section" data-section="5">
                <div class="section-header">
                    <div class="section-number">Section 4</div>
                    <h2 class="section-title">Challenges & Priorities</h2>
                </div>

                <div class="question">
                    <label for="q4_1">What are the most pressing challenges facing K9 Connectables right now?</label>
                    <textarea id="q4_1" name="q4_1" placeholder="Your response..."></textarea>
                </div>
                <div class="question">
                    <label for="q4_2">Why are these challenges difficult to address?</label>
                    <textarea id="q4_2" name="q4_2" placeholder="Your response..."></textarea>
                </div>
                <div class="question">
                    <label for="q4_3">What matters most to you when evaluating options?</label>
                    <textarea id="q4_3" name="q4_3" placeholder="Your response..."></textarea>
                </div>
                <div class="question">
                    <label for="q4_4">What level of change or risk is the business comfortable with?</label>
                    <textarea id="q4_4" name="q4_4" placeholder="Your response..."></textarea>
                </div>
            </div>

            <!-- Section 5: Additional Information -->
            <div class="section" data-section="6">
                <div class="section-header">
                    <div class="section-number">Section 5</div>
                    <h2 class="section-title">Additional Information</h2>
                </div>

                <div class="question">
                    <label for="q5_1">Company website URL</label>
                    <input type="text" id="q5_1" name="q5_1" placeholder="https://...">
                </div>
                <div class="question">
                    <label for="q5_2">Who are the key decision-makers we should be aware of?</label>
                    <textarea id="q5_2" name="q5_2" placeholder="Your response..."></textarea>
                </div>
                <div class="question">
                    <label for="q5_3">Is there anything else you'd like us to know?</label>
                    <textarea id="q5_3" name="q5_3" placeholder="Your response..."></textarea>
                </div>

                <div class="info-note">
                    If you have supporting documents, presentations, sales data, or other materials that would help us understand your situation, please email them separately to <a href="mailto:thom@creativespark.ie">thom@creativespark.ie</a>
                </div>
            </div>

            <!-- Submit Section -->
            <div class="submit-section">
                <p>Once you're finished, click below to submit your responses. A copy will be sent to Creative Spark and downloaded as a PDF to your device.</p>
                <button type="submit" class="btn" id="submitBtn">Submit Responses</button>
                <div id="statusMessage"></div>
            </div>
        </form>

        <div class="contact">
            <p>Questions? Contact <a href="mailto:thom@creativespark.ie">Thom Conaty</a></p>
        </div>
    </div>

    <script>
        const { jsPDF } = window.jspdf;

        // Progress tracking
        const form = document.getElementById('discoveryForm');
        const inputs = form.querySelectorAll('textarea, input[type="text"]');
        const progressFill = document.getElementById('progressFill');
        const progressSection = document.getElementById('progressSection');
        const progressPercent = document.getElementById('progressPercent');
        const sections = form.querySelectorAll('.section');

        function updateProgress() {
            let filledCount = 0;
            inputs.forEach(input => {
                if (input.value.trim().length > 0) {
                    filledCount++;
                }
            });

            const percent = Math.round((filledCount / inputs.length) * 100);
            progressFill.style.width = percent + '%';
            progressPercent.textContent = percent + '% complete';

            // Update current section based on scroll position
            let currentSection = 1;
            sections.forEach((section, index) => {
                const rect = section.getBoundingClientRect();
                if (rect.top < window.innerHeight / 2) {
                    currentSection = index + 1;
                }
            });
            progressSection.textContent = `Section ${currentSection} of ${sections.length}`;
        }

        inputs.forEach(input => {
            input.addEventListener('input', updateProgress);
        });

        window.addEventListener('scroll', updateProgress);

        // Form submission
        form.addEventListener('submit', function(e) {
            e.preventDefault();

            const date = new Date().toLocaleDateString('en-GB', { 
                day: 'numeric', 
                month: 'long', 
                year: 'numeric' 
            });
            const dateFile = new Date().toISOString().split('T')[0];

            // Build response data
            const responses = {
                respondent: {
                    name: getValue('q0_1'),
                    role: getValue('q0_2')
                },
                businessContext: {
                    trajectory: getValue('q1_1'),
                    workingWell: getValue('q1_2'),
                    team: getValue('q1_3'),
                    constraints: getValue('q1_4'),
                    vision: getValue('q1_5')
                },
                market: {
                    customer: getValue('q2_1'),
                    feedback: getValue('q2_2'),
                    competitors: getValue('q2_3'),
                    position: getValue('q2_4'),
                    channels: getValue('q2_5'),
                    barriers: getValue('q2_6')
                },
                product: {
                    performing: getValue('q3_1'),
                    underperforming: getValue('q3_2'),
                    unmetNeeds: getValue('q3_3'),
                    manufacturing: getValue('q3_4'),
                    newCapabilities: getValue('q3_5')
                },
                challenges: {
                    pressing: getValue('q4_1'),
                    whyDifficult: getValue('q4_2'),
                    priorities: getValue('q4_3'),
                    riskTolerance: getValue('q4_4')
                },
                additional: {
                    website: getValue('q5_1'),
                    decisionMakers: getValue('q5_2'),
                    other: getValue('q5_3')
                }
            };

            // Build HTML email content
            const htmlContent = `
                <h2>Discovery Questionnaire Response</h2>
                <p><strong>Client:</strong> K9 Connectables</p>
                <p><strong>Submitted:</strong> ${date}</p>
                <p><strong>Respondent:</strong> ${responses.respondent.name} (${responses.respondent.role})</p>
                <hr>
                
                <h3>1. Business Context</h3>
                <p><strong>Current trajectory:</strong><br>${responses.businessContext.trajectory}</p>
                <p><strong>What's working well:</strong><br>${responses.businessContext.workingWell}</p>
                <p><strong>Team:</strong><br>${responses.businessContext.team}</p>
                <p><strong>Constraints:</strong><br>${responses.businessContext.constraints}</p>
                <p><strong>2-3 year vision:</strong><br>${responses.businessContext.vision}</p>
                
                <h3>2. Market & Customers</h3>
                <p><strong>Primary customer & problem:</strong><br>${responses.market.customer}</p>
                <p><strong>Customer feedback:</strong><br>${responses.market.feedback}</p>
                <p><strong>Competitors & differentiation:</strong><br>${responses.market.competitors}</p>
                <p><strong>Market position:</strong><br>${responses.market.position}</p>
                <p><strong>Sales channels:</strong><br>${responses.market.channels}</p>
                <p><strong>Barriers to growth:</strong><br>${responses.market.barriers}</p>
                
                <h3>3. Product Portfolio</h3>
                <p><strong>Performing products:</strong><br>${responses.product.performing}</p>
                <p><strong>Underperforming & learnings:</strong><br>${responses.product.underperforming}</p>
                <p><strong>Unmet customer needs:</strong><br>${responses.product.unmetNeeds}</p>
                <p><strong>Manufacturing & constraints:</strong><br>${responses.product.manufacturing}</p>
                <p><strong>New capabilities:</strong><br>${responses.product.newCapabilities}</p>
                
                <h3>4. Challenges & Priorities</h3>
                <p><strong>Pressing challenges:</strong><br>${responses.challenges.pressing}</p>
                <p><strong>Why difficult:</strong><br>${responses.challenges.whyDifficult}</p>
                <p><strong>Evaluation priorities:</strong><br>${responses.challenges.priorities}</p>
                <p><strong>Risk tolerance:</strong><br>${responses.challenges.riskTolerance}</p>
                
                <h3>5. Additional Information</h3>
                <p><strong>Website:</strong> ${responses.additional.website}</p>
                <p><strong>Decision-makers:</strong><br>${responses.additional.decisionMakers}</p>
                <p><strong>Other:</strong><br>${responses.additional.other}</p>
            `;

            // Get UI elements
            const submitBtn = document.getElementById('submitBtn');
            const statusMessage = document.getElementById('statusMessage');
            
            // Disable button and show loading state
            submitBtn.disabled = true;
            submitBtn.textContent = 'Sending...';
            statusMessage.innerHTML = '';
            statusMessage.className = 'status-message';

            // Send email via EmailJS
            emailjs.send('service_oq7ebse', 'template_dk00evg', {
                date: date,
                responses: htmlContent
            }).then(function() {
                // Success - show message
                statusMessage.className = 'status-message status-success';
                statusMessage.innerHTML = 'Responses sent successfully to Creative Spark. Your PDF download will start shortly.';
                
                // Generate and download PDF
                generatePDF(responses, date, dateFile);
                
                submitBtn.textContent = 'Submitted';
            }, function(error) {
                // Error - show message but still allow download
                statusMessage.className = 'status-message status-error';
                statusMessage.innerHTML = 'There was an issue sending the email. Please download the PDF and email it to thom@creativespark.ie manually.';
                
                // Still generate PDF
                generatePDF(responses, date, dateFile);
                
                submitBtn.disabled = false;
                submitBtn.textContent = 'Try Again';
                console.error('EmailJS error:', error);
            });
        });

        function generatePDF(responses, date, dateFile) {
            const doc = new jsPDF();
            let y = 20;
            const margin = 20;
            const pageWidth = doc.internal.pageSize.getWidth();
            const maxWidth = pageWidth - (margin * 2);
            const lineHeight = 7;

            // Helper function to add text with word wrap
            function addText(text, fontSize = 11, isBold = false) {
                doc.setFontSize(fontSize);
                doc.setFont('helvetica', isBold ? 'bold' : 'normal');
                const lines = doc.splitTextToSize(text, maxWidth);
                
                lines.forEach(line => {
                    if (y > 270) {
                        doc.addPage();
                        y = 20;
                    }
                    doc.text(line, margin, y);
                    y += lineHeight;
                });
            }

            function addSection(title) {
                if (y > 250) {
                    doc.addPage();
                    y = 20;
                }
                y += 5;
                doc.setFontSize(14);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(45, 90, 74);
                doc.text(title, margin, y);
                y += 10;
                doc.setTextColor(0, 0, 0);
            }

            function addQuestion(label, answer) {
                if (y > 250) {
                    doc.addPage();
                    y = 20;
                }
                doc.setFontSize(10);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(100, 100, 100);
                doc.text(label, margin, y);
                y += 6;
                doc.setTextColor(0, 0, 0);
                doc.setFont('helvetica', 'normal');
                const answerText = answer || 'No response provided';
                const lines = doc.splitTextToSize(answerText, maxWidth);
                lines.forEach(line => {
                    if (y > 275) {
                        doc.addPage();
                        y = 20;
                    }
                    doc.text(line, margin, y);
                    y += 6;
                });
                y += 4;
            }

            // Header
            doc.setFontSize(10);
            doc.setTextColor(45, 90, 74);
            doc.text('CREATIVE SPARK', margin, y);
            y += 15;

            doc.setFontSize(22);
            doc.setFont('helvetica', 'bold');
            doc.setTextColor(0, 0, 0);
            doc.text('Discovery Questionnaire', margin, y);
            y += 10;

            doc.setFontSize(14);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(100, 100, 100);
            doc.text('K9 Connectables', margin, y);
            y += 15;

            doc.setFontSize(11);
            doc.text(`Submitted: ${date}`, margin, y);
            y += 6;
            doc.text(`Respondent: ${responses.respondent.name} (${responses.respondent.role})`, margin, y);
            y += 15;

            // Draw line
            doc.setDrawColor(200, 200, 200);
            doc.line(margin, y, pageWidth - margin, y);
            y += 10;

            // Sections
            addSection('1. Business Context');
            addQuestion('Current trajectory', responses.businessContext.trajectory);
            addQuestion('What is working well', responses.businessContext.workingWell);
            addQuestion('Team', responses.businessContext.team);
            addQuestion('Constraints', responses.businessContext.constraints);
            addQuestion('2-3 year vision', responses.businessContext.vision);

            addSection('2. Market & Customers');
            addQuestion('Primary customer & problem', responses.market.customer);
            addQuestion('Customer feedback', responses.market.feedback);
            addQuestion('Competitors & differentiation', responses.market.competitors);
            addQuestion('Market position', responses.market.position);
            addQuestion('Sales channels', responses.market.channels);
            addQuestion('Barriers to growth', responses.market.barriers);

            addSection('3. Product Portfolio');
            addQuestion('Performing products', responses.product.performing);
            addQuestion('Underperforming & learnings', responses.product.underperforming);
            addQuestion('Unmet customer needs', responses.product.unmetNeeds);
            addQuestion('Manufacturing & constraints', responses.product.manufacturing);
            addQuestion('New capabilities', responses.product.newCapabilities);

            addSection('4. Challenges & Priorities');
            addQuestion('Pressing challenges', responses.challenges.pressing);
            addQuestion('Why difficult', responses.challenges.whyDifficult);
            addQuestion('Evaluation priorities', responses.challenges.priorities);
            addQuestion('Risk tolerance', responses.challenges.riskTolerance);

            addSection('5. Additional Information');
            addQuestion('Website', responses.additional.website);
            addQuestion('Decision-makers', responses.additional.decisionMakers);
            addQuestion('Other', responses.additional.other);

            // Save
            doc.save(`K9-Connectables-Discovery-${dateFile}.pdf`);
        }

        function getValue(id) {
            const el = document.getElementById(id);
            return el ? el.value.trim() : '';
        }

        // Initial progress update
        updateProgress();
    </script>
</body>
</html>
